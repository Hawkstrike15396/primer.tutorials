---
title: RStudio and Friends
author: Anmay Gupta and Nuo Wen Lei
tutorial:
  id: rstudio-and-friends
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: Introduction to RStudio, Git, GitHub, R Markdown and R Pubs.
---

```{r setup, include = FALSE}
library(learnr)
library(primer.tutorials)
library(primer.data)
library(tidyverse)
library(knitr)
library(gistr)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local")
```

```{r copy-code-chunk, child = "../../child_documents/copy_button.Rmd"}
```

```{r info-section, child = "../../child_documents/info_section.Rmd"}
```

<!-- Use getwd() to determine the path of the current project. Mention that students should ensure that there are no spaces, if it all possible. Do this at end of Checking your Set Up. Deal with and/or check and/or educate about OneDrive and other Cloud-based locations where they are doing work. Do this at end of Checking your Set Up. Maybe the advice is to ensure that your projects are located on your machine, not in the cloud. This is possible to do! I'm going to try advising them, but I don't know how to check if it's on the cloud or not. I did find a tutorial here:  https://medium.com/@ValidScience/how-to-fix-rstudios-package-installation-on-windows-10-c1e602bf3a1f about dealing with OneDrive with R and its packages and stuff. -->

<!-- Liam: Every time we create a new project, it quits out of the current R Studio session, which means that the tutorial itself closes. Which is confusing! And this happens multiple times in this tutorial. Should we have two R Studio sessions, like we do in later tutorials. -->

## Overview
###

Up until now, you have been programming awesome plots on your own computer. But what if you want to share these visualizations and the code behind it with others? Well, that's where tools like GitHub and RPub come in.

This tutorial will walk you through the process of creating accounts for GitHub and RPub, then you will upload your first visualization onto the internet!

## Checking your setup

### 

This tutorial assumes that you have read and completed all the steps in the [Getting Started](https://ppbds.github.io/primer/getting-started.html) chapter of the *Primer*.


### Exercise 1

In the [Getting Started section](https://ppbds.github.io/primer/getting-started.html), you should have installed the **remotes**, **tidyverse**, **usethis**, and **primer.tutorials** packages.

### 

<!-- DK: Make this easier to copy/paste? -->

Run `library(remotes)`, `library(tidyverse)`, `library(usethis)`, and `library(primer.tutorials)` in the Console.

### 

Run `search()` in the Console to see the libraries that you've currently loaded, then copy and paste the result into the tutorial into the space below.

```{r checking-your-setup-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

There should be strings such as "package:tidyverse" in the output. These are the packages that you are using in your project.

### Exercise 2

Now to make sure we will always be working from a *blank slate* for our R projects, meaning R won't store information between restarts, run `rstudioapi::writeRStudioPreference("save_workspace", "never")` in your console. While you should have done this in the Getting Started tutorial, we will ensure that you do it again.

### 

Run `rstudioapi::readRStudioPreference(name = "load_workspace", default = "Code failed.")` in the Console. Copy and paste both the command and the result into the space below.

```{r checking-your-setup-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

The result should be FALSE.

### Exercise 3

If you haven't already, create a `projects` folder somewhere on your computer to store your R projects in. We'll be using this folder to keep our R projects organized and separate from the rest of your files.

### 

Run `getwd()` in the Console. Copy and paste both the command and the result into the space below.

```{r checking-your-setup-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should return the folder path of your current project. Every R project is stored as a folder in your `projects` folder, so you should always be careful to make sure you are in the project folder you are working on.

## Setting up GitHub

### 

GitHub is, more or less, a Google Drive for all your R code and projects. In the professional world, what you have on your GitHub account is more important than what you have on your resume. It is a verifiable demonstration of your abilities.

### Exercise 1

Ensure that Git is installed on your computer. Read and follow the [Install Git](https://happygitwithr.com/install-git.html) chapter in *[Happy Git and GitHub for the useR](https://happygitwithr.com/)*.


### 

Click on the Terminal pane, which is next to the Console pane in the lower left portion of RStudio. Run `git --version` in the Terminal to make sure that git is installed and accessible.

<!-- I don't think we need this -->

<!-- The Terminal tab will have a dollar sign (`$`) as the prompt. If it doesn't have that and instead uses an arrow (`>`), please visit [the HappyGitWithR tutorial](https://happygitwithr.com/rstudio-see-git.html). -->

```{r}
include_graphics("images/Terminal_example.png")
```

### 

Copy/paste the result of the git command into the space below.

```{r setting-up-github-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

If you want to learn more about Git and what it does, see *[Pro Git](https://git-scm.com/book/en/v2)*.

### Exercise 2

The next step is creating a GitHub account by going to the [GitHub mainpage](https://github.com/) and following their instructions. **Follow [this advice](https://happygitwithr.com/github-acct.html#username-advice) when choosing your username.** 

### 

Copy your GitHub profile URL in the field below. It should look like:

<https://github.com/your-username>

```{r setting-up-github-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Git is a powerful project-organizing tool that allows people to communicate between their local computers and GitHub account in a documented and structured fashion.

### Exercise 3

Now that you have your GitHub account, you need to connect Git and RStudio to your account. We can do this by first giving RStudio your GitHub account email and your name.

### 

Run `usethis::use_git_config(user.name = "your-username", user.email = "your@email.org")` in the Console, substituting the email and name you used for your GitHub account.

### 

Run `git config --global user.name` in the Terminal to make sure your computer remembers your GitHub username.

Then run `git config --global user.email` in the Terminal to make sure your GitHub email is stored too.

Copy and paste the command and results to the space below.

```{r setting-up-github-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Your GitHub username and email are stored so that your computer can automate a lot of the tedious actions required to communicate with GitHub. 

### 

**Note:** You cannot do the following sections of this tutorial if you did not get the correct outputs for the last two exercises.

## GitHub Repositories

### 

GitHub is our Google Drive. GitHub repositories, or "repos", are the Google folders where we store our work. Let's make a practice repo!

### Exercise 1

To begin, sign into GitHub and go to the homepage. Click the green new button that says "New" on the left of the website.

```{r}
include_graphics("images/new_repo.png")
```

### Exercise 2

Name your repository "First_Repo". Then, select the "public" option for your repo and check the box saying "Add a README file". README is a document where programmers often add or explain details of their project.

After you've done that, go ahead and click "Create repository" to create your first repo!

```{r}
include_graphics("images/repo_details.png")
```

Copy the url of your project page (the page which GitHub should have directed you to after creating the repo) and paste it below.

```{r github-repositories-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

The option of "public" means that anyone will be able to view the repository while only you can edit it. And you might have noticed "Add .gitignore" as another option. We will talk more about it later, stay tuned :)

### Exercise 3

The next step will be to create the exact same project in your local computer through the process of **cloning**. By having a local and a GitHub version, you can edit your project on your computer and send all the changes you've made to GitHub, so the GitHub version can be synced up with your local version.

To clone the repo, click on the green button that says "Code". Then copy the link shown. You can use the clipboard button on the right to automatically copy it.

```{r, out.width="875px"}
include_graphics("images/repo_clone.png")
```

Paste the link below.

```{r github-repositories-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

###

This link points to your project folder stored in GitHub. It is slightly different from the url of the project page because the `.git` suffix shows it is a special GitHub object and not a webpage.

## Connecting GitHub to RStudio

### 

<!-- Liam: May need to restart the R session or R Studio to get .environ to work. Sys.getenv() was not working without this. -->

Now, we've created a new repository on GitHub.

Let's connect your `First_Repo` repository to RStudio.

### Exercise 1

Open RStudio. Go to File, then New Project.

```{r}
include_graphics("images/new_project.png")
```

### Exercise 2

A window pops up. Select Version Control and then Git. It should look like the two images below.

```{r}
knitr::include_graphics("images/git_project_1.png")
knitr::include_graphics("images/git_project_2.png")
```

Paste the link you copied from GitHub into "Repository URL". Then, click on "Browse..." and find the folder you created for your R projects, which will be where you store the clone of `First_Repo`.

In this case, check the box at the bottom called **"Open project in new session"** so you can still keep running this tutorial. Then click "Create Project".

Navigate to the Terminal tab and run `git remote -v`. Then copy and paste both the command and the output into the space below. The output should contain the original link you pasted.

**Note:** If the output does not contain the link, try switching from Terminal to the Console tab and run `system("git remote -v")`. If the output still does not contain the link, stop the tutorial and **reach out on Discord**.

```{r connecting-github-to-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

YAY! You've successfully linked your repo to RStudio!

### Exercise 3

Now, you've linked your GitHub repo to your project, but you haven't proven that you are someone with editing access to the project. If we just let anyone with the GitHub link edit, that's obviously going to lead to problems with security down the line. This is when we use something known as a **P**ersonal **A**ccess **T**oken, or a **PAT**.

### 

A PAT is just a special computer-generated password between your computer and GitHub that lets GitHub connect your GitHub account and your computer together. If you want to learn more, see section "[Personal access token for HTTPS](https://happygitwithr.com/https-pat.html)" from *[Happy Git and GitHub for the useR](https://happygitwithr.com/)*

### 

Create a PAT by using the `usethis::create_github_token()` function in the Console. This should redirect you to a GitHub page about creating a PAT.

### 

Set the "Note" field to "My First PAT" and keep the scopes the same as the **default**. It should look something like the picture below (Doesn't have to be exact).

```{r, out.width="625px"}
include_graphics("images/pat.png")
```

### 

Press "Generate Token" at the bottom of the page to finalize your PAT.

### Exercise 4

Now that we've created our PAT, first temporarily copy and paste it somewhere you have easy access to (ex: notes). We will store it in several places in RStudio to make sure the computer doesn't forget.

### 

Run `gitcreds::gitcreds_set()` in the Console and follow the prompts, providing your token when asked.

### 

Now, restart your R session. Remember to do this in the session where your github repo is running, **not the session where the tutorial is**. Restart your R session by going to "Session" at the top bar, and then the option to Restart R should be under that tab. Then run `usethis::git_sitrep()` in the Console and copy-paste the result in the space below.

```{r connecting-github-to-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

It should look similar to this:

```{r}
include_graphics("images/sitrep.png")
```

If there are any errors, you may need to recreate your PAT and go through the process again. You can reach out on Discord for help if needed.

### Exercise 5

It's also a good idea to save your GitHub PAT to your `.Renviron` file. This is a file that stores information on your computer rather than on your project, making it a safe place to store sensitive information like your GitHub PAT or API keys.

### 

Run `usethis::edit_r_environ()` in the Console to open your `.Renviron` file. If you can't open the file, it's likely due to you using OneDrive or a cloud drive service to store your projects. **Please store your projects on your own computer in order to prevent future errors**.

### 

Add the line `GITHUB_PAT=` and your GitHub PAT in the first line of your .Renviron file and save. Make sure your PAT is surrounded with "quotes" because it is a string.

It should look something like this.

```{r}
include_graphics("images/save-pat.png")
```

### 

Run `Sys.getenv("GITHUB_PAT")` in the Console. Copy-paste the command and the output in the space below. If you are nervous about sharing your GITHUB_PAT, feel free to change it after your copy/paste it into the answer.

```{r connect-git-ex-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Packages like `usethis` will read your .Renviron file and access the `GITHUB_PAT` variable, so make sure that you use the correct formatting and name your variables correctly.

## Updating .gitignore

### 

The first thing you should always do when working with a new repo is updating the `.gitignore` file. You can open this file from the bottom right window under the Files tab. The purpose of `.gitignore` is to list all the files that you don't want to be uploaded to GitHub. This can come in handy when you are working with big datasets or files with private information.

###

### Exercise 1

Open the `.gitignore` and add `*.Rproj`. The \* tells your computer that we want to prevent all files ending in `.Rproj` from being uploaded. You could also just add `First_Repo.Rproj`.

```{r}
include_graphics("images/rproj.png")
```

### Exercise 2

Save the `.gitignore` file and on your top right panel, navigate to the Git tab. You should see `.gitignore` listed but not `First_Repo.Rproj`. The Git tab shows all the changes you have made on your local computer. Since you added `First_Repo.Rproj` in `.gitignore`, it shouldn't show up as one of the changed files that the GitHub version should be synced with.

If you do see `First_Repo.Rproj`, try clicking on the refresh button in the upper left or make sure you got it spelled right.

```{r}
include_graphics("images/updated_gitignore.png")
```

### 

Run `readLines(".gitignore")` in the Console. Copy and paste the command as well as the output into the space below.

```{r updating-gitignore-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should output all of the lines in your `.gitignore` file.

### Exercise 3

Now that we've updated our `.gitignore` file, we want to upload this new version to GitHub. Otherwise, GitHub doesn't know that we want to hide our `.Rproj` file.

### 

To do so, first check the checkbox next to the `.gitignore` file and then click on the `Commit` button in the Git tab.

```{r}
include_graphics("images/commit.png")
```

### 

This will open a new window where you will write a commit message. The message is meant to note what you're adding/changing within the repo. And yes it's mandatory.

### Exercise 4

Let's fill out this window.

### 

Check all of the boxes on the left-hand side. Then, write the commit message "Updated .gitignore" and press `Commit`.

<!-- Image is weird, need to change to get rid of the `push` arrow. -->

```{r}
include_graphics("images/commit_push.png")
```

### 

Run `gert::git_log() |> select(-commit, -merge, -files) |> slice(1)`, which returns the author, time, and message of the last commit.

Copy and paste the command and result into the space below.

```{r updating-gitignore-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### Exercise 5

Next, press `Push` with the green arrow on the top right. This pushes or uploads the files and changes to GitHub! Open up GitHub and refresh the project page to see your commit message at the top of your repo page.

### 

Run `gert::git_ahead_behind()$ahead` in the Console. Copy and paste the command and result below.

```{r updating-gitignore-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should return `0`, showing that you are 0 commits out of sync with the GitHub version.

## Preparing to Publish

### 

Now it's time to do something cool. Let's go through how we can publish our R projects onto the internet by using RPubs.

You can find more information on the [RPubs homepage](https://rpubs.com/).

### Exercise 1

To get our project started, create a new GitHub repository titled "First_Rpubs" similar to how you did it before (don't forget to include a README file).

### Exercise 2

Clone the repository to your local computer as a new R project. **Remember to create the project in a new session!** and close the RStudio window for `First_Repo`.

We'll be using this process multiple times throughout these tutorials, so try to get used to it.

### 

Run `git remote -v` in the Terminal and copy-paste the output below.

```{r preparing-to-publish-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should contain the URL that you just copied from GitHub.

### Exercise 3

Edit the `.gitignore` file to include the line `*.Rproj`.

Run `readLines(".gitignore")` in the Console and copy-paste the output below.

```{r preparing-to-publish-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

So far, we've set up the project, but let's actually make some content to put in our RPubs website. We can do this by using R Markdown files.

## R Markdown

### 

R Markdown files are the primary way that we are going to be coding in R.

R Markdown is a file format for making dynamic documents with R. An R Markdown document is written in markdown (an easy-to-write plain text format) and contains chunks of embedded R code.

These files are special because they can be **knitted** into *reports* (or HTML files) that are used in websites. We'll be publishing an R Markdown file to RPubs.

You can learn more about how to write R Markdown files with [RStudio's website introducing R Markdown](https://rmarkdown.rstudio.com/articles_intro.html).

### Exercise 1

First off, let's create an R Markdown file. Go to File -\> New File -\> R Markdown. Title the file "index.Rmd" and proceed through the creation process.

```{r}
include_graphics("images/new_rmd.png")
```

Run `list.files()` in the Console and copy-paste the result below. The title of your R Markdown file should be one of the results.

```{r r-markdown-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### Exercise 2

The default R Markdown file should look like this:

```{r, out.width="875px"}
include_graphics("images/rmd_example.png")
```

### 

Each section has its own value.

### 

As you can see, a lot of the text is actually plain text. However, there are code chunks that display R code. Here's an example of an R code chunk.

```{r}
knitr::include_graphics("images/rmd_chunk_1.png")
```

```{r echo = FALSE}
plot(cars)
```

This allows you to use R to create graphs then display it in an R Markdown file with plain text descriptions.

Delete everything except the YAML header (contained by dashes) and the first code chunk (often known as the setup code chunk), then add "This is my first R Markdown text." at the bottom. Then press the "Knit" button at the top to display your rendered R Markdown file. This should have your custom text.

### 

Run `readLines("index.Rmd") |> tail()`

```{r r-markdown-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should return the last 6 lines of your R Markdown file.

### Exercise 3

Now, we earlier saw how a majority of the text within R Markdown files is just plain text. However, there was that one piece that wasn't: the R Markdown Header.

### 

Essentially, R Markdown allows for Markdown syntax. That lets you **bold**, *italicize*, or `code` text. By doing this, you can format your report easily and make it look nice by just adding in a few extra symbols.

### 

Make the text created in the previous section a header by adding `##` at the beginning, then adding this text under that as a description: `You can do a lot of cool things in R Markdown like **bold** and *italic* text.` Knit the file again and make sure that everything is showing up correctly.

### 

Run `readLines("index.Rmd") |> tail()` in the Console, then copy-paste the command and the output below.

```{r r-markdown-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should contain the text that you created in this exercise as well as the previous text. You can find a full list of R Markdown formatting styles and commands [here](https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf).

### Exercise 4

Now let's try to add code chunks into our R Markdown file. Under the text that we added earlier, add a code chunk either by pressing the Add Chunk command at the top of the editor (the green C button with a plus sign next to it) or just typing it out. The code chunk should look like this:

```{r}
knitr::include_graphics("images/rmd_chunk_2.png")
```

### 

Run `readLines("index.Rmd") |> tail()` in the Console, then copy-paste the command and the output below.

```{r r-markdown-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should show the code chunk you created.

### Exercise 5

Let's try graphing the **iris** data within our code chunk.

### 

First of all, we need to load the libraries that we need. In the setup chunk, load the **tidyverse** library using the `library()` command. Your setup chunk should look like this:

```{r}
knitr::include_graphics("images/rmd_chunk_3.png")
```

This lets R know what packages you're going to be using throughout this R Markdown file.

### 

Run `readLines("index.Rmd") |> head(15)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

We load our libraries in the setup chunk in order to run the `library()` commands first. This lets us use them later without any issues since they've already been called.

### Exercise 6

Go back to the code chunk that you manually created. This is where we're going to be coding for the rest of this section.

### 

Let's create the following scatter plot in an R Markdown file:

```{r}
scat_p <- ggplot(data = iris, 
                 mapping = aes(x = Sepal.Width, 
                               y = Sepal.Length, 
                              color = Species)) +
  geom_point() +
  labs(title = "Measurements for Different Species of Iris",
       subtitle = "Virginica has the longest sepals",
        x = "Sepal.Width",
        y = "Sepal.Length", 
       caption = "Fisher (1936)")
scat_p
```

This graph should be similar to ones you have created in previous visualization tutorials.

### 

Within `ggplot()`, set `data` to `iris`. Also, map `Sepal.Width` to the x-axis and `Sepal.Length` to the y-axis. Add the layer `geom_point()`. It should look like the code below.

```{r}
knitr::include_graphics("images/rmd_code_ex_1.png")
```

### 

Run `readLines("index.Rmd") |> tail(10)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Whenever you want to run an R function, just go to the "Run" menu in the top right corner by the new code chunk button and then click "Run All", "Run Selected Chunk", or "Run Current Line" depending on what you want to run.

If you just want to run the code in one code chunk, press the green arrow at the far right of the code chunk.

### Exercise 7

Now we want to add a `color` aesthetic based on the different species of the iris flower. Set the argument `color` to `Species` inside the `aes()` function.

Run `readLines("index.Rmd") |> tail(10)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

The output should include the last 10 lines of code in your R Markdown file.

### Exercise 8

We just built the basic graph, but it still looks ugly. Labels are important for adding context to the graph and making it easy to understand.

### 

Use the `labs()` function to add a title and axis labels to the graph.

Set the `title` to `"Measurements for Different Species of Iris"` and the `subtitle` to `"Virginica has the longest sepals"`.

To label the axes, set `x` to `"Sepal.Width"` and `y` to `"Sepal.Length"`. Set the `caption` to `"Fisher (1936)"`.

Run `readLines("index.Rmd") |> tail(10)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

Reminder: This is generally what our graph should look like.

```{r}
scat_p
```

### 

Congratulations on completing the plot. Go ahead and knit the file to see what it looks like.

### Exercise 9

Now, we just used a code chunk because we wanted to do a full graph. But that's very long and annoying, and it doesn't let you put anything in the same line as your text. This is when we can use inline R code.

### 

Inline R code is essentially a way for you to put R calculations in the same line as your text. For example, let's run the following R code chunk.

```{r}
knitr::include_graphics("images/rmd_chunk_4.png")
```

```{r}
x <- 1234567890
x
```

What if we want to include whatever value of the `x` variable in our lines of text?

We can display variable values in the same line as normal text by using inline R code. For example, here's what the number looks like in the R Markdown file.

The variable x has a value of: `r scales::comma(x)`.

And here's what the R Markdown text looks like:

The variable x has a value of: `` `r knitr::inline_expr("scales::comma(x)")` ``.

### 

As you can see, it's just a condensed version of a full code chunk. We declare the language (R) and then state our function (`scales::comma(x)`). By doing this, we can put R code in the same line as actual text.

### 

Let's try this in our actual R Markdown file. To start, add a new code chunk that declares the `x` variable and sets its value to `1234567890`.

### 

Run `readLines("index.Rmd") |> tail(10)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-9}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This sets up our code function by declaring the value of x.

### 

If you want to hide this code chunk from when you generate the report, add "echo=FALSE" as an argument by the "r" at the top of the code chunk. The first line of the chunk should look like `{r, echo=FALSE}`.

### Exercise 10

Now let's actually use that `x` variable in some inline R code. While you can define variables in inline R code, it's not recommended as defining variables doesn't output anything. In general, you should use inline R code to format or calculate values rather than to define variables or do complex operations.

### 

Add the following line at the bottom of your R Markdown file, after the code chunk created in the last exercise.

The variable x has a value of `` `r knitr::inline_expr("scales::comma(x)")` ``.

### 

Run `readLines("index.Rmd") |> tail(10)` in the Console, then copy-paste the command and the output below.

```{r r-markdown-10}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

When you knit your file, you should be able to see that the `` `r knitr::inline_expr("scales::comma(x)")` `` has been replaced with another value that's formatted correctly.

### 

This is why inline R code is valuable, as it allows you to format numbers or show functions in the same line as your text.

### 

Congratulations on creating a full R Markdown file containing a plot, some text, and some inline R code. Now let's try to publish it to the Internet.

## Publishing to RPubs

### 

We'll be publishing our R Markdown files on the Internet by using [RPubs](https://rpubs.com/), a free web publishing service. This is a fairly simple process, but you will need to create an RPubs account.

### Exercise 1

Knit the R Markdown file that you've been working in so far. By knitting, you are generating a report written in HTML, which is what Rpubs publishes on the web.

### 

Run `list.files()` in the Console, then copy-paste the command and the result below.

```{r publishing-to-rpubs-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You should see a `.html` file with the same name as your R Markdown file in the result.

### 

It's recommended to change the YAML header to get rid of information like the date and title, as it looks bad in the final knit. However, make sure not to mess with the rest of the YAML formatting because it is a very structurally sensitive language. You can learn more about YAML editing at [bookdown.org](https://bookdown.org/yihui/bookdown/r-markdown.html).

### Exercise 2

Notice a blue icon in the upper right-hand corner that reads `Publish`. Click it.

```{r, out.width="875px"}
include_graphics("images/rpubs-5.png")
```

### Exercise 3

You will be asked whether you want to publish to Rpubs or to RStudio Connect. Choose RPubs. You will get a reminder that all documents you publish on RPubs are publicly visible. Click "Publish".

```{r}
include_graphics("images/rpubs-6.png")
```

### Exercise 4

This will take you to the RPubs website. You will need to create an account. Follow the steps as prompted.

```{r}
include_graphics("images/rpubs-7.png")
```

### Exercise 5

Add document details. Name your document. Add a meaningful slug (a unique website name that's often just the name of your project), otherwise you will end up with an ugly, long address you didn't choose and can't remember. You can leave the description blank if you don't want to add one.

```{r}
include_graphics("images/rpubs-8.png")
```

### Exercise 6

Hit "Continue". You have now published your first document to RPubs! People can now access it on the internet and see what you did for this file!

```{r, out.width="875px"}
include_graphics("images/rpubs-9.png")
```

### Exercise 7

There is one more important step. The folder "rsconnect" contains files specific to your computer that you do not want to push to GitHub. Therefore, as with `.Rproj` files before, we want to add the `rsconnect` folder to the `.gitignore` file. Click on `.gitignore`, add `rsconnect` there and hit "Save." You will see it disappear from your Git tab in the top right window.

```{r, out.width="875px"}
include_graphics("images/rpubs-10.png")
```

### 

Run `readLines(".gitignore")` in the Console, then copy-paste the command and the output below.

```{r rpubs-finish-ex-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

If you don't see any changes in the Git tab, hit the Refresh button in the top right corner. Since you've updated your `.gitignore` file, you should commit and push your changes to your GitHub repository.

### Exercise 8

You finished publishing your page to RPubs! Put the link to your RPubs page in the space below.

```{r publishing-to-rpubs-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

Keep in mind that this is a website that can be found on the internet.

## R Scripts

### 

<!-- This marks the beginning of the third and final case study. -->

So we have just created a plot within an R Markdown file to publish it on the web. In R Markdown, you can add r code chunks, formatted text and descriptions, much like designing a website. But what if we just want to make a plot in r?

### 

That's when we use **R Scripts**. Think of these like code chunks but as an entire file. They only use R code and don't have any text, but they're very useful for when you want to create a graph or do an operation without actually displaying it in a rendered R Markdown report. They're often used to create graphs or other objects, which are then stored for later use.

### Exercise 1

Let's get started! The first step of almost every project is always creating a new GitHub repository to store our R code in.

### 

Create a new GitHub repository named `First_R_Script`. Add a README file and make it a public repository.

### 

Copy-paste the link to your GitHub repository below.

```{r r-scripts-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should be the human-accessible link to your GitHub, without the `.git` at the end.

### Exercise 2

Now we need to open the GitHub repo in RStudio so that we can actually add R files into the GitHub repo.

### 

Create a new R project by going to File -\> New Project and following the steps previously described in the "Connecting GitHub to RStudio" section.

### 

Run `list.files()` in the Console and copy-paste the output into the space below.

```{r r-scripts-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should be the list of files in your R project and as such contain the `.Rproj` and the `.gitignore` files.

### Exercise 3

Let's create an R Script file so that we can start coding in R and creating more graphs.

### 

You can create an R Script by going to File -\> New File -\> R Script. Save the file and name it "FirstRScript.R".

```{r}
include_graphics("images/new_rscript.png")
```

### 

Run `list.files()` in the Console to list all of the files. Copy and paste the output into the space below.

```{r r-scripts-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You should see the `FirstRScript.R` file in this output.

### Exercise 4

As you can see, this is a blank file. However, we can put in R code in this file and run it.

Let's try making this graph in our R Script file:

```{r}
hist_p <- ggplot(data = qscores, 
                 mapping = aes(x = rating)) +
  geom_histogram(bins = 5, 
                 color = "white", 
                 fill = "coral") + 
  labs(title = "Histogram of Student Ratings of Harvard Classes", 
       subtitle = "Ratings of 1 and 2 are very rare", 
       x = "Rating", 
       y = "Count", 
       caption = "Source: Harvard Q-Guide (2018-2019)")

hist_p
```

### 

First off, we need to load the libraries.

Load the **tidyverse** and **primer.data** libraries into your R Script file using the `library()` command.

### 

In the Console tab, run `readLines("FirstRScript.R")` and copy-paste the output into the space below.

```{r r-scripts-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This should output all of the lines in the `FirstRScript.R` file, including the `library()` commands.

### Exercise 5

Now start a `ggplot()` and set the `data` argument to `qscores`. Map `rating` to the x-axis to see the distribution of Harvard course ratings. Then add the layer `geom_histogram()`.

In the Console tab, run `readLines("FirstRScript.R")` and copy-paste the output into the space below.

```{r r-scripts-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You can run code in a `.R` file by pressing Ctrl/Cmd + Enter or clicking the "Run" button in the top right. Keep in mind that this runs the program line by line, so you'll likely have to press the button multiple times.

If you want to run the whole file at once without clicking the button over and over, highlight the entire document and click the same "Run" button.

### Exercise 6

Add white vertical borders dividing the bins by setting `color` equal to `"white"` within `geom_histogram()`.

In the Console tab, run `readLines("FirstRScript.R")` and copy-paste the output into the space below.

```{r r-scripts-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

This separates the different rectangles and makes the graph look better. If you want to change the color of the rectangles themselves instead of the border, use the `fill` argument.

### Exercise 7

Now, this graph has a lot of different rectangles, each representing its own rating. But we just want 5 rectangles, each representing the number of reviews for that star (we don't want decimal ratings). We can show this by using the `bins` argument.

### 

Specify the number of bins to be 5 using the `bins` argument in `geom_histogram()`.

In the Console tab, run `readLines("FirstRScript.R")` and copy-paste the output into the space below.

```{r r-scripts-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You can also use the `binwidth` argument to change the width of the rectangles.

### Exercise 8

Now use `labs()` to set an appropriate title, subtitle, axes labels, and caption for the graph.

Reminder: This is what our graph should look like.

```{r}
hist_p
```

In the Console tab, run `readLines("FirstRScript.R")` and copy-paste the output into the space below.

```{r r-scripts-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You've successfully created an R Script file and managed to make a graph using it. Let's try to publish that R file on the web and share it with other people.

## Gists

### 

So far we've been working out of GitHub repos. And while these are extremely useful and extremely common, they're way too big if we just want to share some code with a friend or put a small code snippet on the web. That's where gists come in.

### 

Gists are essentially mini repos that don't have as many features but are very lightweight, letting you create gists very easily and very quickly.

### 

Think of it like sending a text versus sending an email. It's not optimal to attach a lot of files (or really anything that's not an image) to a text, but that perfectly suits emailing. On the other hand, it's not very useful to send a 7 word email to somebody when you could have just texted them the same thing.

### 

Gists are texts and repos are emails. You should know how to use both.

### Exercise 1

In order to create gists using R, we need to download the **gistr** package. While you can create gists through GitHub, using **gistr** is a lot quicker and is more convenient.

### 

Run `install.packages("gistr")` in the Console. Then run `library(gistr)`.

### 

In the Console tab, run `search()` and copy-paste the output into the space below.

```{r gists-1}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 2)
```

### 

You should now see "package:gistr" somewhere in the output.

### Exercise 2

Let's try to publish our `FirstRScript.R` file as a Gist. We can do this by using the `gist_create()` function in the **gistr** package.

### 

Run `gist_create("FirstRScript.R")` in the Console. This should bring you to a GitHub page.

```{r, out.width="875px"}
include_graphics("images/gist_create.png")
```

### 

And that's it! This is the finished gist. Copy the URL of the gist into the box below.

```{r gists-2}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This is how you can share R code between different people. Just send the link to the gist and they'll be able to use it like a normal repository but only for that one code file. It's quick and easy!

### Exercise 3

Now, a notable feature of gists is the fact that they can be used to display code. Websites like [Medium](https://medium.com/@alenanikulina0/embed-github-gists-in-medium-beginner-friendly-718ea8dce176) often use this to clearly display and format code in articles.

<!-- =html tag is used to render the gist in the tutorial, I have adjusted test-code-chunks.R to allow =html to pass -->

```{=html}
<script src="https://gist.github.com/AnmayG/7bbbddbb38855e7c25fce5d5e8b1a461.js"></script>
```

### 

In the top right of the Gists webpage, you should see a box that allows you to copy something that looks like this:

`<script src="https://gist.github.com/YourUserName/7bbbddbb38955e7c25fce5d5e8b1a461.js"></script>`

This is how you would embed a Gist (like the one above) into an R Markdown file or something similar. You can just copy that code into your R Markdown file (you don't need to use a code chunk), and it would show the Gist like it does above.

### 

Copy and paste that stretch of code into the box below.

```{r gists-3}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This make Gists very useful for displaying code in your website.

### Exercise 4

But what if you want to edit a gist and add new files to it? This is where gists really shine because they're the same thing as a normal repository, just a lot more lightweight. Let's try to add the image of our graph to our gist.

### 

We first need to pull the gist into R so that we can edit it. We can do this just like we would a normal repository: by copying the HTTPS link and pulling it into RStudio.

### 

let's walk through this. In the top right corner, there is a dropdown menu labeled "Embed". Click that, then click "Clone via HTTPS".

```{r, out.width="875px"}
include_graphics("images/gist_clone.gif")
```

### 

Copy and paste that URL into the box below.

```{r gists-4}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should be a URL similar to the one that we used to copy our GitHub repository, but for Gists instead.

### Exercise 5

Now just use that link to create a new RStudio Project like we did with the GitHub repositories. Rename the project to `First_Gist_Edit`.

```{r, out.width="875px"}
include_graphics("images/gist_proj.gif")
```

### 

Run `list.files()` in the Console and copy-paste the output into the box below.

```{r gists-5}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should contain your R Script file and a .gitignore file, among others. Remember to update the `.gitignore` file to ignore the `.Rproj` file so that you don't upload it to your Gist.

### Exercise 6

Now let's add a picture of our graph to the Gist. We can do this by saving the graph produced by our R Script file as an image.

### 

First, run the R Script file so that the graph shows up in the Plots tab in the bottom right. You should then be able to click "Export" and follow the steps to save the graph as a PNG file. Name the file `graph.png` and **save it in your gist project folder**.

```{r, out.width="875px"}
include_graphics("images/png_save.gif")
```

### 

Run `list.files()` in the Console then copy-paste the command and the output into the box below.

```{r gists-6}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should contain the PNG file that you just saved.

### Exercise 7

Now let's push our graph into the Gist.

### 

Go to the Git tab, then commit the `graph.png` file by pressing the "Commit" button and checking the boxes. Write a meaningful message like "added graph.png".

### 

Run `gert::git_ahead_behind()$ahead` in the Console, then copy-paste the command and the output into the box below.

```{r gists-7}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should return `1` to signify that your computer is 1 commit ahead of the Gist. Let's fix that by pushing our changes.

### Exercise 8

As we went over earlier, pushing uploads the files on your computer to GitHub.

### 

Press the green "Push" arrow to push the files. GitHub here will prompt for your username and password, which might seem weird at first because we should have already linked our GitHub account to RStudio.

This is due to RStudio misinterpreting GitHub Gist with the website of gist.github.com as separate from GitHub with the website of github.com.

So enter your GitHub username for username and Personal Access Token for password (**retrieve your PAT with `usethis::edit_r_environ()`**).

Then go to your Gist tab and reload.

```{r, out.width="875px"}
include_graphics("images/gist_push.gif")
```

### 

Run `gert::git_ahead_behind()$ahead` in the Console, then copy-paste the command and the output into the box below.

```{r gists-8}
question_text(NULL,
    answer(NULL, correct = TRUE),
    allow_retry = TRUE,
    try_again_button = "Edit Answer",
    incorrect = NULL,
    rows = 3)
```

### 

This should return `0` to signify that your computer and GitHub have the same files. Congratulations on successfully creating and editing your Gist.

### 

When it comes to gists, there's one rule to follow:

> **Use a gist to display one or two files and use a repository to store your entire project.**

This is the basic guideline when it comes to storing your files on GitHub and sharing them with other people.

On a website called [Liquid Web](https://www.liquidweb.com/), you can find a [more detailed walkthrough](https://www.liquidweb.com/kb/little-known-ways-to-utilize-github-gists/) on how to create gists through GitHub.

<!-- ## Using GitHub -->

<!-- ### -->

<!-- AG: Graduation case study begins here -->

<!-- For the last part of the tutorial, let's go over using GitHub to download somebody's work and tinker with it ourselves. -->

<!-- ### -->

<!-- AG: Need to build case study repo, then include the information about forking and a link to HappyGitWithR -->

Good work on finishing this tutorial!

```{r download-answers, child = "../../child_documents/download_answers.Rmd"}
```
